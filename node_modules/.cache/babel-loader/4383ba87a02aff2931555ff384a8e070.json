{"ast":null,"code":"var _jsxFileName = \"/home/adam/source/bookstore/src/SubjectPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Axios from 'axios';\nimport './App.css';\nimport { get_query, bookList as listBooks } from './Utility';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst config = require('./config');\n\nexport default function BookList() {\n  _s();\n\n  var [bookList, setBookList] = React.useState([]);\n  var [pageCount, setPageCount] = React.useState(0);\n  var [subjectInfo, setSubjectInfo] = React.useState(0);\n  React.useEffect(() => {\n    const url = new URL(window.location.href);\n    Axios.get(config.apiUrl + 'list' + url.search + (url.search ? '&' : '?') + 'subject=' + window.location.pathname.match('[^/]*$')).then(data => {\n      console.log(data);\n      setBookList(data.data.books);\n      setPageCount(data.data.pageCount);\n    });\n    Axios.get(config.apiUrl + 'subject?subject=' + window.location.pathname.match('[^/]*$')).then(data => {\n      console.log(data);\n      setSubjectInfo(data.data);\n    });\n  }, []);\n  const pageNumbers = [];\n  const page_text = get_query('page');\n  const current_page = page_text.length > 0 ? parseInt(page_text) : 0;\n  const query = get_query('q');\n  if (current_page > 0) pageNumbers.push( /*#__PURE__*/_jsxDEV(\"a\", {\n    className: \"pageNumber\",\n    href: \"/list?page=\" + (current_page - 1) + (query ? \"&q=\" + query : \"\"),\n    children: \"<<\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 44\n  }, this));\n\n  for (let i = 0; i < pageCount; i++) {\n    pageNumbers.push(i === current_page ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"currentPageNumber\",\n      children: i\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 47\n    }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n      className: \"pageNumber\",\n      href: \"/list?page=\" + i + (query ? \"&q=\" + query : \"\"),\n      children: i\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 96\n    }, this));\n  }\n\n  if (current_page < pageCount - 1) pageNumbers.push( /*#__PURE__*/_jsxDEV(\"a\", {\n    className: \"pageNumber\",\n    href: \"/list?page=\" + (current_page + 1) + (query ? \"&q=\" + query : \"\"),\n    children: \">>\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 54\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"BooksHeading\",\n      children: [\" \", setSubjectInfo.subject_name ? subjectInfo.subject_name : 'Neznámy predmet', \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"SearchForm\",\n      name: \"search_form\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"q\",\n        type: \"text\",\n        placeholder: \"Zadajte n\\xE1zov knihy...\",\n        defaultValue: query\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"BookList\",\n      children: [listBooks(bookList), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", bookList.length === 0 ? \"Neboli nájdené žiadne knihy\" : \"\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), pageCount > 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pageNumbers\",\n        children: [\" \", pageNumbers, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 34\n      }, this) : []]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BookList, \"ksZNS0syNSSy8OBYJSzYxaLj5w8=\");\n\n_c = BookList;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookList\");","map":{"version":3,"sources":["/home/adam/source/bookstore/src/SubjectPage.jsx"],"names":["React","Axios","get_query","bookList","listBooks","config","require","BookList","setBookList","useState","pageCount","setPageCount","subjectInfo","setSubjectInfo","useEffect","url","URL","window","location","href","get","apiUrl","search","pathname","match","then","data","console","log","books","pageNumbers","page_text","current_page","length","parseInt","query","push","i","subject_name"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Axios from 'axios';\nimport './App.css';\nimport {get_query, bookList as listBooks} from './Utility';\n\nconst config = require('./config')\n\nexport default function BookList() {\n    var [bookList, setBookList] = React.useState([]);\n    var [pageCount, setPageCount] = React.useState(0);\n    var [subjectInfo, setSubjectInfo] = React.useState(0);\n\n    React.useEffect(() => {\n        const url = new URL(window.location.href)\n        Axios.get(config.apiUrl + 'list' + url.search + (url.search ? '&' : '?') + 'subject=' + window.location.pathname.match('[^/]*$')).then((data) => {\n            console.log(data);\n            setBookList(data.data.books);\n            setPageCount(data.data.pageCount);\n        })\n        Axios.get(config.apiUrl + 'subject?subject=' + window.location.pathname.match('[^/]*$')).then((data) => {\n            console.log(data);\n            setSubjectInfo(data.data);\n        });\n    }, []);\n\n    const pageNumbers = [];\n    const page_text = get_query('page')\n    const current_page = page_text.length > 0 ? parseInt(page_text) : 0;\n    const query = get_query('q')\n\n    if (current_page > 0) pageNumbers.push(<a className=\"pageNumber\" href={\"/list?page=\"+(current_page-1)+(query?\"&q=\"+query:\"\")}>{\"<<\"}</a>);\n    for (let i = 0; i < pageCount; i++) {\n        pageNumbers.push(i === current_page ? <span className=\"currentPageNumber\">{i}</span> : <a className=\"pageNumber\" href={\"/list?page=\"+i+(query?\"&q=\"+query:\"\")}>{i}</a>);\n    }\n    if (current_page < pageCount-1) pageNumbers.push(<a className=\"pageNumber\" href={\"/list?page=\"+(current_page+1)+(query?\"&q=\"+query:\"\")}>{\">>\"}</a>);\n\n    return (\n        <div>\n            <h1 className=\"BooksHeading\"> {setSubjectInfo.subject_name ? subjectInfo.subject_name : 'Neznámy predmet'} </h1>\n            <form className=\"SearchForm\" name=\"search_form\">\n                    <input name=\"q\" type=\"text\" placeholder=\"Zadajte názov knihy...\" defaultValue={query}/>\n            </form>\n            <div className='BookList'>\n                {listBooks(bookList)}\n                <p> {bookList.length === 0 ? \"Neboli nájdené žiadne knihy\" : \"\"} </p>\n                {pageCount > 1 ? <div className=\"pageNumbers\"> {pageNumbers} </div> : []}\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}